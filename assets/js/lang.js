const translations = {
  "ca": {
    // LOGO
    "logo_text": "Projecte Ctrl Z",

    // Menú
    "nav_home": "Inici",
    "nav_about": "Sobre nosaltres",
    "nav_programs": "Programes",
    "nav_live": "En directe",
    "nav_gallery": "Galeria Z",
    "nav_contact": "Contacte",
    
    // Hero (Index)
    "hero_title": "Benvinguts a Projecte Ctrl Z",
    "hero_subtitle": "El podcast juvenil on exposem la realitat sense filtres. Novetats, curiositats, debats i enquestes cada setmana!",
    
    // Botons xarxes
    "btn_yt": "YouTube",
    "btn_spot": "Spotify",
    "btn_insta": "Instagram",
    "btn_tiktok": "TikTok",
    "btn_amazon": "Amazon Music",

    // Secció Novetats (Index)
    "section_news": "Novetats",
    "news_1": "Programa quinzenal.",
    "news_2": "Nou episodi cada dos dimecres a les 19h a Spotify i YouTube!",
    "news_3": "En directe a la ràdio cada dos diumenge de 19-20h.",
    "news_4": "Participa a les nostres enquestes a Instagram.",

    // Secció Curiositats (Index)
    "section_curiosities": "Curiositats",
    "curio_1_title": "Sabies que...",
    "curio_1_text": "El nom \"Ctrl Z\" fa referència a la tecla per desfer, perquè volem repensar la realitat juvenil!",
    "curio_2_title": "Dades ràpides",
    "curio_2_list_1": "Podcast bilingüe",
    "curio_2_list_2": "Estudiants d’Educació i Informàtica",
    "curio_2_list_3": "Debats sense filtres",

    // Secció Enquestes (Index)
    "section_polls": "Enquestes",
    "polls_text": "Participa a les nostres enquestes setmanals a",

    // Pàgina Sobre Nosaltres
    "about_adria_text": "L’Adrià és estudiant d’informàtica i el desenvolupador d’aquesta pàgina web. Ha dedicat hores a escriure codi, resoldre errors i fer que tot funcioni com cal. Tot i que no és el més expert a l'hora de comunicar és un dels pilars fonamentals del projecte ajudant al Bernat a donar forma a les seves idees i donant-li suport en tot moment.",
    "about_bernat_text": "El Bernat és estudiant d’educació i el creador del podcast que acompanya aquest projecte. Té la virtut (o el defecte) de no parar mai de donar idees a l’Adrià. Sigui de dia o de nit, sempre troba un moment per enviar un missatge amb alguna ocurrència nova. Aquesta constància fa que molts el considerin el veritable motor creatiu del projecte o simplement en “el pesat” oficial de l’equip.",
    "about_junts_title": "Junts",
    "about_junts_text": "Junts, l’Adrià i el Bernat volen connectar amb els joves i qüestionar aquelles pràctiques que sovint es venen com normals però que acaben sent autodestructives: l’obsessió per la festa, l’abús de les drogues o el culte excessiu al cos són exemples d’alguns temes. El seu objectiu és obrir debat i demostrar que hi ha maneres diferents de viure i créixer sense seguir inèrcies que només porten problemes.",

    // Pàgina Programes
    "programs_h1": "Programes",

    // Pàgina En Directe
    "live_h1": "En directe",
    "live_subtitle": "En directe a la ràdio cada diumenge de 19-20h.",
    "live_link": "Escolta'ns a Ona de Sants Montjuïc",
    "live_desc": "Ona de Sants-Montjuïc és l’emissora de ràdio comunitària del barri de Sants, a Barcelona. Porta anys sent un punt de trobada per a iniciatives culturals i juvenils, oferint espai a projectes que volen comunicar, experimentar i connectar amb el públic local.<br><br>Tot i que el projecte del podcast no va néixer a la ràdio, la col·laboració amb Ona de Sants-Montjuïc ha estat clau per donar-li un salt de qualitat. Gràcies a l’acompanyament i als recursos de l’emissora, els integrants del podcast han pogut créixer i professionalitzar-se en aquest format. Cal destacar especialment el suport del Jordi Roca i la Lourdes Tasies, que amb la seva experiència i dedicació han ajudat a impulsar el projecte i a fer que l’experiència sigui molt enriquidora per a tothom.",

    // Pàgina Galeria
    "gallery_title": "Galeria Z",
    "gallery_subtitle": "Una mirada als millors moments del projecte",

    // Pàgina Contacte (NOU)
    "contact_h1": "Contacta'ns",
    "contact_subtitle": "Tens algun dubte, proposta o suggeriment? Escriu-nos!",
    "contact_email_label": "Correu electrònic oficial:",
    "form_name": "Nom",
    "form_email": "El teu correu",
    "form_subject": "Assumpte",
    "form_message": "Missatge",
    "form_btn": "Enviar Missatge",

    // Footer
    "footer_rights": "© 2025 Projecte Ctrl Z. Tots els drets reservats."
  },
  "es": {
    // LOGO
    "logo_text": "Proyecto Ctrl Z",

    // Menú
    "nav_home": "Inicio",
    "nav_about": "Sobre nosotros",
    "nav_programs": "Programas",
    "nav_live": "En directo",
    "nav_gallery": "Galería Z",
    "nav_contact": "Contacto",

    // Hero (Index)
    "hero_title": "Bienvenidos a Proyecto Ctrl Z",
    "hero_subtitle": "El podcast juvenil donde exponemos la realidad sin filtros. ¡Novedades, curiosidades, debates y encuestas cada semana!",

    // Botons xarxes
    "btn_yt": "YouTube",
    "btn_spot": "Spotify",
    "btn_insta": "Instagram",
    "btn_tiktok": "TikTok",
    "btn_amazon": "Amazon Music",

    // Secció Novetats (Index)
    "section_news": "Novedades",
    "news_1": "Programa quincenal",
    "news_2": "¡Nuevo episodio cada dos miércoles a las 19h en Spotify y YouTube!",
    "news_3": "Participa en nuestras encuestas en Instagram.",
    "news_4": "En directo en la radio cada dos domingos de 19-20h.",

    // Secció Curiositats (Index)
    "section_curiosities": "Curiosidades",
    "curio_1_title": "¿Sabías que...?",
    "curio_1_text": "El nombre \"Ctrl Z\" hace referencia a la tecla para deshacer, ¡porque queremos repensar la realidad juvenil!",
    "curio_2_title": "Datos rápidos",
    "curio_2_list_1": "Podcast bilingüe",
    "curio_2_list_2": "Estudiantes de Educación e Informática",
    "curio_2_list_3": "Debates sin filtros",

    // Secció Enquestes (Index)
    "section_polls": "Encuestas",
    "polls_text": "Participa en nuestras encuestas semanales en",

    // Pàgina Sobre Nosaltres
    "about_adria_text": "Adrià es estudiante de informática y el desarrollador de esta web. Ha dedicado horas a escribir código, resolver errores y hacer que todo funcione. Aunque no es el más experto comunicando, es un pilar fundamental del proyecto, ayudando a Bernat a dar forma a sus ideas y dándole apoyo en todo momento.",
    "about_bernat_text": "Bernat es estudiante de educación y el creador del podcast. Tiene la virtud (o el defecto) de no parar nunca de dar ideas a Adrià. Sea de día o de noche, siempre encuentra momento para enviar un mensaje con alguna ocurrencia. Esta constancia hace que muchos lo consideren el motor creativo o simplemente 'el pesado' oficial del equipo.",
    "about_junts_title": "Juntos",
    "about_junts_text": "Juntos, Adrià y Bernat quieren conectar con los jóvenes y cuestionar prácticas que se venden como normales pero acaban siendo autodestructivas: la obsesión por la fiesta, el abuso de drogas o el culto excesivo al cuerpo. Su objetivo es abrir debate y demostrar que hay maneras diferentes de vivir y crecer sin seguir inercias que solo traen problemas.",

    // Pàgina Programes
    "programs_h1": "Programas",

    // Pàgina En Directe
    "live_h1": "En directo",
    "live_subtitle": "En directo en la radio cada domingo de 19-20h.",
    "live_link": "Escúchanos en Ona de Sants Montjuïc",
    "live_desc": "Ona de Sants-Montjuïc es la emisora de radio comunitaria del barrio de Sants, en Barcelona. Lleva años siendo un punto de encuentro para iniciativas culturales y juveniles, ofreciendo espacio a proyectos que quieren comunicar, experimentar y conectar con el público local.<br><br>Aunque el proyecto del podcast no nació en la radio, la colaboración con Ona de Sants-Montjuïc ha sido clave para darle un salto de calidad. Gracias al acompañamiento y a los recursos de la emisora, los integrantes del podcast han podido crecer y profesionalizarse en este formato. Cabe destacar especialmente el apoyo de Jordi Roca y Lourdes Tasies, que con su experiencia y dedicación han ayudado a impulsar el proyecto y a hacer que la experiencia sea muy enriquecedora para todos.",

    // Pàgina Galeria
    "gallery_title": "Galería Z",
    "gallery_subtitle": "Una mirada a los mejores momentos del proyecto",

    // Pàgina Contacte (NOU)
    "contact_h1": "Contáctanos",
    "contact_subtitle": "¿Tienes alguna duda, propuesta o sugerencia? ¡Escríbenos!",
    "contact_email_label": "Correo electrónico oficial:",
    "form_name": "Nombre",
    "form_email": "Tu correo",
    "form_subject": "Asunto",
    "form_message": "Mensaje",
    "form_btn": "Enviar Mensaje",

    // Footer
    "footer_rights": "© 2025 Projecte Ctrl Z. Todos los derechos reservados."
  }
};

function changeLanguage(lang) {
  localStorage.setItem('preferredLang', lang);
  
  // 1. Canviar tots els textos
  document.querySelectorAll('[data-lang]').forEach(element => {
    const key = element.getAttribute('data-lang');
    if (translations[lang][key]) {
      if(key === 'live_desc' || key === 'polls_text') {
         if(key === 'polls_text') {
            const link = element.querySelector('a');
            if(link) {
              element.firstChild.textContent = translations[lang][key] + " ";
            } else {
               element.innerHTML = translations[lang][key]; 
            }
         } else {
            element.innerHTML = translations[lang][key];
         }
      } else {
        // Pels inputs del formulari, canviem el placeholder
        if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
            element.placeholder = translations[lang][key];
        } else {
            element.textContent = translations[lang][key];
        }
      }
    }
  });

  // 2. Canviar la imatge de la bandera principal
  const imgElement = document.getElementById('current-lang-flag');
  if(imgElement) {
    imgElement.src = `assets/images/flag-${lang}.png`;
    imgElement.alt = lang === 'ca' ? 'Català' : 'Castellano';
  }
}

document.addEventListener('DOMContentLoaded', () => {
  const savedLang = localStorage.getItem('preferredLang') || 'ca';
  changeLanguage(savedLang);

  const langBtn = document.getElementById('lang-btn');
  const langDropdown = document.getElementById('lang-dropdown');

  if(langBtn) {
    langBtn.addEventListener('click', (e) => {
      e.stopPropagation();
      langDropdown.classList.toggle('show-lang');
    });

    window.addEventListener('click', () => {
      if (langDropdown.classList.contains('show-lang')) {
        langDropdown.classList.remove('show-lang');
      }
    });
  }
});